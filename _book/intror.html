<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Introduction to R | staRters; An introductory workshop for analysis of data with R</title>
  <meta name="description" content="HU Ontwikkelfestival, 2-4 November, 2020" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Introduction to R | staRters; An introductory workshop for analysis of data with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="HU Ontwikkelfestival, 2-4 November, 2020" />
  <meta name="github-repo" content="uashogeschoolutrecht/staRters" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Introduction to R | staRters; An introductory workshop for analysis of data with R" />
  
  <meta name="twitter:description" content="HU Ontwikkelfestival, 2-4 November, 2020" />
  

<meta name="author" content="Marc A.T. Teunis, PhD" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="rmarkdown.html"/>
<link rel="next" href="recursivevectors.html"/>
<script src="libs/header-attrs-2.4/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/htmlwidgets-1.5.2/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.15/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<script src="libs/d3-5.7.0/d3.min.js"></script>
<script src="libs/d3-lasso-0.0.5/d3-lasso.min.js"></script>
<link href="libs/ggiraphjs-0.3.0/ggiraphjs.min.css" rel="stylesheet" />
<script src="libs/ggiraphjs-0.3.0/ggiraphjs.min.js"></script>
<script src="libs/girafe-binding-0.7.8/girafe.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Analysis with R for staRters</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prerequisites</a></li>
<li class="chapter" data-level="2" data-path="why-r.html"><a href="why-r.html"><i class="fa fa-check"></i><b>2</b> Why use R?</a></li>
<li class="chapter" data-level="3" data-path="gettingstarted.html"><a href="gettingstarted.html"><i class="fa fa-check"></i><b>3</b> Getting Started</a></li>
<li class="chapter" data-level="4" data-path="edacase.html"><a href="edacase.html"><i class="fa fa-check"></i><b>4</b> Case Example</a></li>
<li class="chapter" data-level="5" data-path="introrstudio.html"><a href="introrstudio.html"><i class="fa fa-check"></i><b>5</b> Introduction to RStudio</a></li>
<li class="chapter" data-level="6" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>6</b> Literate Programming with RMarkdown</a></li>
<li class="chapter" data-level="7" data-path="intror.html"><a href="intror.html"><i class="fa fa-check"></i><b>7</b> Introduction to R</a></li>
<li class="chapter" data-level="8" data-path="recursivevectors.html"><a href="recursivevectors.html"><i class="fa fa-check"></i><b>8</b> Lists and dataframes</a></li>
<li class="chapter" data-level="9" data-path="viz.html"><a href="viz.html"><i class="fa fa-check"></i><b>9</b> Visualize &amp; Explore Data</a></li>
<li class="chapter" data-level="10" data-path="wrangling.html"><a href="wrangling.html"><i class="fa fa-check"></i><b>10</b> Data Wrangling</a></li>
<li class="chapter" data-level="11" data-path="tidydata.html"><a href="tidydata.html"><i class="fa fa-check"></i><b>11</b> Tidy Data</a></li>
<li class="chapter" data-level="12" data-path="importingdata.html"><a href="importingdata.html"><i class="fa fa-check"></i><b>12</b> Importing data</a></li>
<li class="chapter" data-level="13" data-path="assumptions.html"><a href="assumptions.html"><i class="fa fa-check"></i><b>13</b> Assumptions and statistical models</a></li>
<li class="chapter" data-level="14" data-path="sampling-bootstrapping.html"><a href="sampling-bootstrapping.html"><i class="fa fa-check"></i><b>14</b> Sampling, Probability distributions and bootstrapping</a></li>
<li class="chapter" data-level="15" data-path="resources.html"><a href="resources.html"><i class="fa fa-check"></i><b>15</b> Resources</a></li>
<li class="divider"></li>
<li><a href="https://github.com/uashogeschoolutrecht/staRters" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">staRters; An introductory workshop for analysis of data with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="intror" class="section level1" number="7">
<h1><span class="header-section-number">Chapter 7</span> Introduction to R</h1>
<div id="packages-for-this-chapter" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Packages for this chapter</h2>
<p>For the materials in this chapter we need to load the tidyverse package suite. You will get a warning message stating something about masking of functions.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="intror.html#cb76-1"></a><span class="kw">library</span>(tidyverse)</span></code></pre></div>
</div>
<div id="example-data" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Example data</h2>
<p>To get an idea on how to work with objects in R we need an object. Here we create an object called a <code>data frame</code>. We will be mainly working with data in a <code>data frame</code> so I introduce this early.
Th data frame contains two variables called <code>A</code> and <code>B</code>. Both variables are collections of numbers randomly drawn from a pre-specified normal distribution</p>
<p>In math form we would note (for variable <code>A</code>):</p>
<p><span class="math inline">\(\Large A \sim Normal(\overline{x}, S_x)\)</span></p>
<p>meaning <code>A</code> is a random variable from a Normal distribution with mean <span class="math inline">\(\overline{x}\)</span> and standard deviation of the mean of <span class="math inline">\(S_x\)</span>.</p>
<p>Luckely, we do not have to worry about math too much, because most functions that we need are build into R. Here we use the function <code>rnorm()</code> to generate a normally distributed series of numbers. To inspect how we can use this function type <code>?rnrom</code> in the <code>Console</code>.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="intror.html#cb77-1"></a><span class="co">## for setting the random number generator - to increase reproducibility</span></span>
<span id="cb77-2"><a href="intror.html#cb77-2"></a><span class="co">## to get help</span></span>
<span id="cb77-3"><a href="intror.html#cb77-3"></a><span class="co"># ?rnorm</span></span>
<span id="cb77-4"><a href="intror.html#cb77-4"></a><span class="kw">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb77-5"><a href="intror.html#cb77-5"></a>normals &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="dv">1000</span>, <span class="dt">mean =</span> <span class="dv">5</span>, <span class="dt">sd =</span> <span class="fl">1.36</span>)</span>
<span id="cb77-6"><a href="intror.html#cb77-6"></a>normals_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">1000</span>, <span class="dt">mean =</span> <span class="fl">1.5</span>, <span class="dt">sd =</span> <span class="fl">1.42</span>)</span>
<span id="cb77-7"><a href="intror.html#cb77-7"></a></span>
<span id="cb77-8"><a href="intror.html#cb77-8"></a>df &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">A =</span> normals,</span>
<span id="cb77-9"><a href="intror.html#cb77-9"></a>             <span class="dt">B =</span> normals_<span class="dv">2</span>)</span>
<span id="cb77-10"><a href="intror.html#cb77-10"></a></span>
<span id="cb77-11"><a href="intror.html#cb77-11"></a>df</span></code></pre></div>
<pre><code>## # A tibble: 1,000 x 2
##        A      B
##    &lt;dbl&gt;  &lt;dbl&gt;
##  1  3.36 -0.212
##  2  5.38  1.93 
##  3  6.47 -0.686
##  4  1.81  2.40 
##  5  5.58  2.50 
##  6  5.69 -1.21 
##  7  4.22  2.83 
##  8  4.26  1.18 
##  9  4.23  0.543
## 10  3.79  2.13 
## # ... with 990 more rows</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="intror.html#cb79-1"></a><span class="co">## change number of observations to 10000 and rerun</span></span></code></pre></div>
<p>The resulting dataframe has two columns and 1000 rows.</p>
</div>
<div id="plot-histogram" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> Plot histogram</h2>
<p>Let’s see</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="intror.html#cb80-1"></a>df <span class="op">%&gt;%</span><span class="st"> </span><span class="co">## pipe `%&gt;%` takes a value an puts it in a function</span></span>
<span id="cb80-2"><a href="intror.html#cb80-2"></a><span class="st">  </span><span class="kw">pivot_longer</span>(A<span class="op">:</span>B, <span class="dt">names_to =</span> <span class="st">&quot;distro&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;value&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb80-3"><a href="intror.html#cb80-3"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> value)) <span class="op">+</span></span>
<span id="cb80-4"><a href="intror.html#cb80-4"></a><span class="st">  </span><span class="kw">geom_density</span>(<span class="kw">aes</span>(<span class="dt">colour =</span> distro), <span class="dt">size =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="ch06_1-intror_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="intror.html#cb81-1"></a><span class="co">## change the `bins` argument to see what happens</span></span></code></pre></div>
</div>
<div id="statistics" class="section level2" number="7.4">
<h2><span class="header-section-number">7.4</span> Statistics</h2>
<p>How would we perform inference on this data to assess whether the mean of distro A is different from the mean of distro B. WE could do this in many ways. One classical approach is to use the Student’s t-Test to analyze two means.
The underlying assumtions of this test is:</p>
<ul>
<li>the data needs to come from a normal distributed sample</li>
<li>the variance needs to be equal</li>
<li>the sample size is reasonably large</li>
<li>the samples have been gathered independently (from one another)</li>
</ul>
<p>Let’s assume we meet all these assumptions.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="intror.html#cb82-1"></a><span class="kw">t.test</span>(df<span class="op">$</span>A, df<span class="op">$</span>B) </span></code></pre></div>
<pre><code>## 
## 	Welch Two Sample t-test
## 
## data:  df$A and df$B
## t = 55.996, df = 1996.6, p-value &lt; 2.2e-16
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  3.322635 3.563818
## sample estimates:
## mean of x mean of y 
##  4.963828  1.520602</code></pre>
</div>
<div id="general-stuff-about-r" class="section level2" number="7.5">
<h2><span class="header-section-number">7.5</span> General stuff about R</h2>
<div id="r-is-case-sensitive" class="section level3 unnumbered" number="">
<h3>R is case sensitive</h3>
<p><em><em>Important note: R is case-sensitive, meaning that it will matter whether you use capital or lower case, keep this in mind if you get a cryptic warning or error!</em></em></p>
</div>
<div id="programming-in-r-can-be-frustrating" class="section level3 unnumbered" number="">
<h3>Programming (in R) can be frustrating</h3>
<ul>
<li>Writing (R) code can be challenging</li>
<li>You will get mind-boggling errors.</li>
<li>R is extremely picky about capitals and every opening <code>(</code>, <code>[</code> or <code>{</code> must be matched by a closing <code>)</code>, <code>]</code> or <code>}</code>.</li>
<li>Finding the right function or package for the job at hand can be a challenge (the fact that there are currenly over 15,000 packages does not make that job any easier)</li>
<li>Getting your data in the right shape, clean and type (see below) can be time consuming</li>
<li>… and many more challenges</li>
</ul>
</div>
<div id="locale-decimal-placeholder" class="section level3 unnumbered" number="">
<h3>Locale &amp; decimal placeholder</h3>
<p>Mind that in R <code>.</code> is the default decimal placeholder!<br />
Many import functions have a solution for when you are trying to parse files that use e.g. the <code>,</code> as a decimal placeholder.</p>
<p>for example</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="intror.html#cb84-1"></a><span class="kw">read_csv</span>(<span class="st">&quot;1,3;2,4;3</span><span class="ch">\n</span><span class="st">4,7;5,6;6,8&quot;</span>, <span class="dt">col_names =</span> <span class="ot">FALSE</span>) <span class="co">## does not parse the right way</span></span></code></pre></div>
<pre><code>## Warning: 1 parsing failure.
## row col  expected    actual         file
##   2  -- 3 columns 4 columns literal data</code></pre>
<pre><code>## # A tibble: 2 x 3
##      X1 X2    X3   
##   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
## 1     1 3;2   4;3  
## 2     4 7;5   6;6</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="intror.html#cb87-1"></a><span class="kw">read_csv2</span>(<span class="st">&quot;1,3;2,4;3</span><span class="ch">\n</span><span class="st">4,7;5,6;6,8&quot;</span>, <span class="dt">col_names =</span> <span class="ot">FALSE</span>) <span class="co">## does the job </span></span></code></pre></div>
<pre><code>## i Using &#39;,&#39; as decimal and &#39;.&#39; as grouping mark. Use `read_delim()` for more control.</code></pre>
<pre><code>## # A tibble: 2 x 3
##      X1    X2    X3
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1   1.3   2.4   3  
## 2   4.7   5.6   6.8</code></pre>
</div>
</div>
<div id="the-tidyverse-suite-of-r-packages" class="section level2" number="7.6">
<h2><span class="header-section-number">7.6</span> The <code>{tidyverse}</code> suite of R packages</h2>
<p>List of available CRAN packages
<a href="http://cran.r-project.org/web/packages/available_packages_by_date.html" class="uri">http://cran.r-project.org/web/packages/available_packages_by_date.html</a></p>
<p>For this course we use the <code>{tidyverse}</code> a lot becasue the syntax follows along the lines of communication in Englih. It is more intuitive, especially to staRters ;-)
<img src="images/tidyverse_sticker.png" width="200" /></p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="intror.html#cb90-1"></a><span class="co"># install.packages(&quot;tidyverse&quot;)</span></span>
<span id="cb90-2"><a href="intror.html#cb90-2"></a><span class="kw">library</span>(tidyverse)</span></code></pre></div>
<div id="tidyverse-functionality-and-packages" class="section level3 unnumbered" number="">
<h3><code>{tidyverse}</code> functionality and packages</h3>
<p>See: <a href="http://tidyverse.tidyverse.org/" class="uri">http://tidyverse.tidyverse.org/</a> for more info
The <code>{tidyverse}</code> package includes (among others):</p>
<ul>
<li>Wrangling: <code>{dplyr}</code>, <code>{tidyr}</code></li>
<li>Reading data: <code>{readr}</code>, <code>{readxl}</code></li>
<li>Functional prgramming: <code>{purrr}</code></li>
<li>Models: <code>{broom}</code></li>
<li>Strings and regular expressions: <code>{stringr}</code></li>
<li>Factors: <code>{forcats}</code></li>
<li>Time (series): <code>{lubridate}</code></li>
</ul>
<p>For all full list type <code>tidyverse_packages()</code> in the console, try it now!</p>
</div>
</div>
<div id="biological-packages" class="section level2" number="7.7">
<h2><span class="header-section-number">7.7</span> ‘Biological’ Packages</h2>
<p>For ‘Biological’ application go to <a href="http://www.bioconductor.org" class="uri">http://www.bioconductor.org</a></p>
<p>Installing Bioconductor packages is different from CRAN packages
example: <code>{affy}</code></p>
<p>Each Bioconductor package has a landing page:</p>
<p><a href="https://www.bioconductor.org/packages/release/bioc/html/affy.html" class="uri">https://www.bioconductor.org/packages/release/bioc/html/affy.html</a></p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="intror.html#cb91-1"></a><span class="co">## installing `{affy}` package</span></span>
<span id="cb91-2"><a href="intror.html#cb91-2"></a>BiocManager<span class="op">::</span><span class="kw">install</span>(<span class="st">&quot;affy&quot;</span>)</span>
<span id="cb91-3"><a href="intror.html#cb91-3"></a><span class="kw">biocLite</span>(<span class="st">&quot;affy&quot;</span>)</span>
<span id="cb91-4"><a href="intror.html#cb91-4"></a></span>
<span id="cb91-5"><a href="intror.html#cb91-5"></a><span class="co">## loading affy package and the vignettes pages of this package</span></span>
<span id="cb91-6"><a href="intror.html#cb91-6"></a><span class="co"># library(affy)</span></span>
<span id="cb91-7"><a href="intror.html#cb91-7"></a><span class="co"># browseVignettes(&quot;affy&quot;)</span></span></code></pre></div>
<p>Bioconductor also has many packages that aid Bayesian inference</p>
</div>
<div id="getting-help" class="section level2" number="7.8">
<h2><span class="header-section-number">7.8</span> Getting help</h2>
<div id="vignettes" class="section level3 unnumbered" number="">
<h3>Vignettes</h3>
<ul>
<li>Vignettes are long explanations and demos of a package</li>
<li>A vignette contains examples and a work flow that shows how the package can be used and which (research) questions can be addressed with the functions and datasets in the package</li>
<li>It usually is a good place to start for examples</li>
<li>It also shows the so-called dependencies of a package</li>
<li>It explains which other packages you would need and how the data should look to be able to work with the package the vignette belongs to</li>
</ul>
</div>
<div id="getting-help-examples" class="section level3 unnumbered" number="">
<h3>Getting Help examples</h3>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="intror.html#cb92-1"></a><span class="co">#install.packages(&quot;dplyr&quot;)</span></span>
<span id="cb92-2"><a href="intror.html#cb92-2"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb92-3"><a href="intror.html#cb92-3"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb92-4"><a href="intror.html#cb92-4"></a>?dplyr</span>
<span id="cb92-5"><a href="intror.html#cb92-5"></a>?ggplot2</span>
<span id="cb92-6"><a href="intror.html#cb92-6"></a>?mean</span>
<span id="cb92-7"><a href="intror.html#cb92-7"></a>?mean  <span class="co"># goes to the page with functions related to &#39;.mean.&#39;</span></span>
<span id="cb92-8"><a href="intror.html#cb92-8"></a><span class="kw">apropos</span>(<span class="st">&quot;mean&quot;</span>) <span class="co"># search on more options of or alternatives for a certain function</span></span>
<span id="cb92-9"><a href="intror.html#cb92-9"></a><span class="kw">formals</span>(dplyr<span class="op">::</span>filter)</span></code></pre></div>
</div>
<div id="examples-and-demos-on-functions-and-packages" class="section level3 unnumbered" number="">
<h3>Examples and demos on functions and packages</h3>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="intror.html#cb93-1"></a><span class="kw">example</span>(mean) <span class="co"># to see a worked example</span></span>
<span id="cb93-2"><a href="intror.html#cb93-2"></a><span class="kw">demo</span>(graphics) <span class="co"># demonstration of R functions</span></span></code></pre></div>
<ul>
<li>If you’re stuck, try the help (<code>?</code> or <code>??</code> or <code>help()</code>) function.</li>
<li>You can get help about any R function by running <code>?function_name</code> and <code>?package_name</code></li>
<li>or <code>??package_name</code>, skip down to the examples and look for code that matches what you’re trying to do.</li>
<li>Another great tool is <code>Google</code> or <code>Stack Overflow</code>: trying googling the error message, as it’s likely someone else has had the same problem, and has gotten help online.</li>
</ul>
</div>
</div>
<div id="using-functions" class="section level2" number="7.9">
<h2><span class="header-section-number">7.9</span> Using functions</h2>
<div id="function-arguments" class="section level3 unnumbered" number="">
<h3>Function arguments</h3>
<p>When calling a function you can explicitly <code>name</code> an argument by using <code>=</code></p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="intror.html#cb94-1"></a>seed &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>)</span>
<span id="cb94-2"><a href="intror.html#cb94-2"></a><span class="kw">set.seed</span>(<span class="dt">seed =</span> seed) </span>
<span id="cb94-3"><a href="intror.html#cb94-3"></a>q &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="dv">10000</span>, <span class="dt">mean =</span> <span class="dv">20</span>, <span class="dt">sd =</span> <span class="dv">2</span>)</span>
<span id="cb94-4"><a href="intror.html#cb94-4"></a><span class="kw">hist</span>(q)</span></code></pre></div>
<p><img src="ch06_1-intror_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>If you ommit naming an argument, the function still works, but the code is harder to read for a human.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="intror.html#cb95-1"></a><span class="kw">set.seed</span>(seed)</span>
<span id="cb95-2"><a href="intror.html#cb95-2"></a>qq &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">10000</span>, <span class="dv">20</span>, <span class="dv">2</span>)</span>
<span id="cb95-3"><a href="intror.html#cb95-3"></a><span class="kw">all</span>(q <span class="op">==</span><span class="st"> </span>qq)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p><strong><strong>Write code for humans AND computers, be explicit!</strong></strong></p>
</div>
<div id="r-is-a-functional-programming-language" class="section level3 unnumbered" number="">
<h3>R is a functional programming language</h3>
<p>Functional programming is basically programming by the use of functions. Many of the functions you will use are pre-exisiting and present either in the base R installation (R-base) or in add-ons called <code>packages</code> in R-lingo.</p>
<p>Every operation in R is a <code>function call</code> with which you execute a function on zero or more arguments. As an example we look at the build-in function in R-base called <code>mean()</code>. When we want to learn more about this function and how to use it, we can use the <code>help()</code> function or the <code>?</code> which is a short-cut for the <code>help()</code> function. Let’s call <code>help()</code> on the <code>mean()</code> function.</p>
<pre><code>help(mean)</code></pre>
<p>Running the above code will yield the following information in the <code>Help</code> pane of the <strong>Navigation</strong> window.</p>
<pre><code>## _A_r_i_t_h_m_e_t_i_c _M_e_a_n
## 
## _D_e_s_c_r_i_p_t_i_o_n:
## 
##      Generic function for the (trimmed) arithmetic mean.
## 
## _U_s_a_g_e:
## 
##      mean(x, ...)
##      
##      ## Default S3 method:
##      mean(x, trim = 0, na.rm = FALSE, ...)
##      
## _A_r_g_u_m_e_n_t_s:
## 
##        x: An R object.  Currently there are methods for numeric/logical
##           vectors and date, date-time and time interval objects.
##           Complex vectors are allowed for &#39;trim = 0&#39;, only.
## 
##     trim: the fraction (0 to 0.5) of observations to be trimmed from
##           each end of &#39;x&#39; before the mean is computed.  Values of trim
##           outside that range are taken as the nearest endpoint.
## 
##    na.rm: a logical value indicating whether &#39;NA&#39; values should be
##           stripped before the computation proceeds.
## 
##      ...: further arguments passed to or from other methods.
## 
## _V_a_l_u_e:
## 
##      If &#39;trim&#39; is zero (the default), the arithmetic mean of the values
##      in &#39;x&#39; is computed, as a numeric or complex vector of length one.
##      If &#39;x&#39; is not logical (coerced to numeric), numeric (including
##      integer) or complex, &#39;NA_real_&#39; is returned, with a warning.
## 
##      If &#39;trim&#39; is non-zero, a symmetrically trimmed mean is computed
##      with a fraction of &#39;trim&#39; observations deleted from each end
##      before the mean is computed.
## 
## _R_e_f_e_r_e_n_c_e_s:
## 
##      Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988) _The New S
##      Language_.  Wadsworth &amp; Brooks/Cole.
## 
## _S_e_e _A_l_s_o:
## 
##      &#39;weighted.mean&#39;, &#39;mean.POSIXct&#39;, &#39;colMeans&#39; for row and column
##      means.
## 
## _E_x_a_m_p_l_e_s:
## 
##      x &lt;- c(0:10, 50)
##      xm &lt;- mean(x)
##      c(xm, mean(x, trim = 0.10))
## </code></pre>
<p>If we want to know what the arguments are that can be entered into the function mean we can review the information in the “Arguments” paragraph. Looking at this part of the help documentation we see that <code>mean()</code> takes 3 named arguments and an argument called <code>...</code> which we explain in more details in Chapter <a href="#wranglingfunctions"><strong>??</strong></a>. The named arguments that can be entered into <code>mean()</code> are:</p>
<p><code>x</code>
<code>trim</code> and
<code>na.rm</code></p>
<p>Let’s look at them in detail.</p>
<p>The description for <code>x</code> states that <code>x</code> is defined as an R object. Clearly we do not yet know what kind of R object there are bu from the description of <code>x</code> can make out a few examples: <code>x</code> can be a numeric, a logical, a date, a date-time or time interval object. Later in this chapter these objects are explained in more detail, but it is rather intuitive that mean at least can take an object consisting of numbers. Below we create an object x, containing 10 random numbers that are sampled from a normal distribution (using a function call to <code>rnorm()</code>).</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="intror.html#cb99-1"></a>x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</span>
<span id="cb99-2"><a href="intror.html#cb99-2"></a>x</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<p>If we want to apply mean to this vector <code>x</code> of 10 numbers we can do so by calling <code>mean()</code> on <code>x</code></p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="intror.html#cb101-1"></a><span class="kw">mean</span>(x)</span></code></pre></div>
<pre><code>## [1] 5.5</code></pre>
<p>When we look at the second and third argument we can deduce that the second argument <code>trim</code> takes any value between 0 and 0.5 and that this argument defines a truncation of the vector <code>x</code>, before the mean is calculated. Here, I show what trim = 0.2 does to our average of <code>x</code>
The trimmed mean is calculated on an <strong>ordered</strong> (from smallest to largest value) vector <code>x</code></p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="intror.html#cb103-1"></a><span class="kw">mean</span>(x, <span class="dt">trim =</span> <span class="fl">0.2</span>)</span></code></pre></div>
<pre><code>## [1] 5.5</code></pre>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="intror.html#cb105-1"></a><span class="co">## manual - compute mean over 2nd - 9th element of x</span></span>
<span id="cb105-2"><a href="intror.html#cb105-2"></a><span class="kw">mean</span>(x[<span class="dv">2</span><span class="op">:</span><span class="dv">9</span>])</span></code></pre></div>
<pre><code>## [1] 5.5</code></pre>
<p>The last argument of <code>mean()</code> is <code>na.rm</code>. If we look at the descrition we can learn that this argument has something to do with misisng values (<code>NA</code>) being present in a vector and how the <code>mean()</code> function will deal with them.
Below two NA values are added to our vector x at position 3 and 6.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="intror.html#cb107-1"></a>x[<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">6</span>)] =<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb107-2"><a href="intror.html#cb107-2"></a>x</span></code></pre></div>
<pre><code>##  [1]  1  2 NA  4  5 NA  7  8  9 10</code></pre>
<p>What happens if we apply <code>mean()</code> to our new <code>x</code> containing two <code>NA</code> values.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="intror.html#cb109-1"></a><span class="kw">mean</span>(x)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>The answer of R is <code>NA</code> which seems cryptic but if we think about it: what is the mean of 8 numbers and two missing values. I don’t know, because I don’t know how to calculate the mean of missing values. R does not either and it let’s us know by saying <code>NA</code>. It does not know how to handle the <code>NA</code> values. By setting the <code>na.rm</code> option to <code>TRUE</code>, the mean function first removes the <code>NA</code> values, before computing the average.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="intror.html#cb111-1"></a><span class="kw">mean</span>(x, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] 5.75</code></pre>
<p>Finaly, looking at the help documentation. At the bottom the examples are usually displayed. Here you can see a demo on how to use a function.</p>
<p>The examples for the <code>mean()</code> function can easily be copied-and-pasted for your own use. You will normally look at the examples first, before diving into the rest of the documentation.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="intror.html#cb113-1"></a><span class="co"># Examples from the documentation for the mean() function:</span></span>
<span id="cb113-2"><a href="intror.html#cb113-2"></a></span>
<span id="cb113-3"><a href="intror.html#cb113-3"></a>x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span><span class="op">:</span><span class="dv">10</span>, <span class="dv">50</span>)</span>
<span id="cb113-4"><a href="intror.html#cb113-4"></a>xm &lt;-<span class="st"> </span><span class="kw">mean</span>(x)</span>
<span id="cb113-5"><a href="intror.html#cb113-5"></a><span class="kw">c</span>(xm, <span class="kw">mean</span>(x, <span class="dt">trim =</span> <span class="fl">0.10</span>))</span></code></pre></div>
<pre><code>## [1] 8.75 5.50</code></pre>
<p>Now that we know how to get help for an R function and how to read the help documentation, it is time to explore R further.</p>
<p>From the above example we learnt that knowing the type and class of a dota object is important for using a function on that data object. Therefore, below we will review some of the the most important data objects and how they are interrelated. It is important to generally know about the different data typres and classes. It will save, but not completely prevent you from making common mistakes and errors in R</p>
</div>
</div>
<div id="r-objects" class="section level2" number="7.10">
<h2><span class="header-section-number">7.10</span> R objects</h2>
<p>R is also an object oriented language. This means that data-structures are stored in objects. Objects have a <code>class</code> and can consist of one (or in some classes) more data <code>types</code>. Below I will review different object classes and types. The use of class and type can be confusing. Relevant for scripting is that you understand the basic differences between different objects.</p>
<p>R objects can be devided in basically two categories:</p>
<ol style="list-style-type: decimal">
<li>Atomic vectors</li>
<li>Lists</li>
</ol>
<p>In Chapter <a href="intror.html#intror">7</a> we will mainly look at atomic vectors. In chapter <a href="recursivevectors.html#recursivevectors">8</a> we will examine lists and dataframes.</p>
<p>The diagram below also shows us <code>NULL</code> which technically is not a vector, but is an atomic value, usually used as ‘zero-length’ vector.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="intror.html#cb115-1"></a>DiagrammeR<span class="op">::</span><span class="kw">grViz</span>(<span class="st">&quot;</span></span>
<span id="cb115-2"><a href="intror.html#cb115-2"></a><span class="st">digraph rmarkdown {</span></span>
<span id="cb115-3"><a href="intror.html#cb115-3"></a><span class="st">  &#39;Vector&#39; -&gt; &#39;Atomic&#39;</span></span>
<span id="cb115-4"><a href="intror.html#cb115-4"></a><span class="st">  &#39;Vector&#39; -&gt; &#39;Recursive vectors&#39; -&gt; List -&gt; &#39;Data frame&#39;</span></span>
<span id="cb115-5"><a href="intror.html#cb115-5"></a><span class="st">  &#39;NULL&#39;</span></span>
<span id="cb115-6"><a href="intror.html#cb115-6"></a><span class="st">}</span></span>
<span id="cb115-7"><a href="intror.html#cb115-7"></a><span class="st">&quot;</span>, <span class="dt">engine =</span> <span class="st">&quot;circo&quot;</span>)</span></code></pre></div>
<div class="figure"><span id="fig:unnamed-chunk-21"></span>
<div id="htmlwidget-ea62365776d42e2ff223" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-ea62365776d42e2ff223">{"x":{"diagram":"\ndigraph rmarkdown {\n  \"Vector\" -> \"Atomic\"\n  \"Vector\" -> \"Recursive vectors\" -> List -> \"Data frame\"\n  \"NULL\"\n}\n","config":{"engine":"circo","options":null}},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figure 7.1: Elementary building blocks in R
</p>
</div>
<p><code>Atomic vectors</code> and <code>Lists</code> can be subdevided and below I will explain the most important R objects and their data type. The graph below shows the main object categories, classes and their types. Lists in R are sometimes collectively called <code>Recursive vectors</code> because they are build from (multiple) atomic vectors. This scheme may appear daunting to you at first, but no panic, we will introduce the different types slowly and before short, it will appear natural to you.</p>
<p>Below we see the two categories <code>Atomic</code> and <code>Recursive</code> vectors subdivided. See also <a href="r_objects.html">graph</a></p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="intror.html#cb116-1"></a>DiagrammeR<span class="op">::</span><span class="kw">grViz</span>(<span class="st">&quot;</span></span>
<span id="cb116-2"><a href="intror.html#cb116-2"></a><span class="st">digraph rmarkdown {</span></span>
<span id="cb116-3"><a href="intror.html#cb116-3"></a><span class="st">  &#39;R object&#39; -&gt; &#39;Atomic vectors&#39;</span></span>
<span id="cb116-4"><a href="intror.html#cb116-4"></a><span class="st">  &#39;R object&#39; -&gt; &#39;Recursive vectors&#39;</span></span>
<span id="cb116-5"><a href="intror.html#cb116-5"></a><span class="st">  &#39;Atomic vectors&#39; -&gt; &#39;Numeric&#39;</span></span>
<span id="cb116-6"><a href="intror.html#cb116-6"></a><span class="st">  &#39;Atomic vectors&#39; -&gt; &#39;Logical&#39;</span></span>
<span id="cb116-7"><a href="intror.html#cb116-7"></a><span class="st">  &#39;Logical&#39; -&gt; &#39;TRUE&#39;</span></span>
<span id="cb116-8"><a href="intror.html#cb116-8"></a><span class="st">  &#39;Logical&#39; -&gt; &#39;FALSE&#39;</span></span>
<span id="cb116-9"><a href="intror.html#cb116-9"></a><span class="st">  &#39;Logical&#39; -&gt; &#39;NA&#39;</span></span>
<span id="cb116-10"><a href="intror.html#cb116-10"></a><span class="st">  &#39;Atomic vectors&#39; -&gt; &#39;Character&#39;</span></span>
<span id="cb116-11"><a href="intror.html#cb116-11"></a><span class="st">  &#39;Numeric&#39; -&gt; &#39;Integer&#39;</span></span>
<span id="cb116-12"><a href="intror.html#cb116-12"></a><span class="st">  &#39;Numeric&#39; -&gt; &#39;Double&#39;</span></span>
<span id="cb116-13"><a href="intror.html#cb116-13"></a><span class="st">  &#39;Numeric&#39; -&gt; &#39;Inf&#39;</span></span>
<span id="cb116-14"><a href="intror.html#cb116-14"></a><span class="st">  &#39;Numeric&#39; -&gt; &#39;-Inf&#39;</span></span>
<span id="cb116-15"><a href="intror.html#cb116-15"></a><span class="st">  &#39;Numeric&#39; -&gt; &#39;NaN&#39;</span></span>
<span id="cb116-16"><a href="intror.html#cb116-16"></a><span class="st">  &#39;Recursive vectors&#39; -&gt; List</span></span>
<span id="cb116-17"><a href="intror.html#cb116-17"></a><span class="st">  &#39;List&#39; -&gt; &#39;Data frame&#39;</span></span>
<span id="cb116-18"><a href="intror.html#cb116-18"></a><span class="st">  &#39;Data frame&#39; -&gt; Tibble </span></span>
<span id="cb116-19"><a href="intror.html#cb116-19"></a><span class="st">  &#39;Double&#39; -&gt; &#39;Date [S3]&#39;</span></span>
<span id="cb116-20"><a href="intror.html#cb116-20"></a><span class="st">  &#39;Double&#39; -&gt; &#39;Date-Time [S3]&#39;</span></span>
<span id="cb116-21"><a href="intror.html#cb116-21"></a><span class="st">  &#39;Integer&#39; -&gt; &#39;Factor [S3]&#39;</span></span>
<span id="cb116-22"><a href="intror.html#cb116-22"></a><span class="st">}</span></span>
<span id="cb116-23"><a href="intror.html#cb116-23"></a><span class="st">&quot;</span>, <span class="dt">engine =</span> <span class="st">&quot;circo&quot;</span>)</span></code></pre></div>
<div class="figure"><span id="fig:unnamed-chunk-22"></span>
<div id="htmlwidget-bf8f936478eee4b06398" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-bf8f936478eee4b06398">{"x":{"diagram":"\ndigraph rmarkdown {\n  \"R object\" -> \"Atomic vectors\"\n  \"R object\" -> \"Recursive vectors\"\n  \"Atomic vectors\" -> \"Numeric\"\n  \"Atomic vectors\" -> \"Logical\"\n  \"Logical\" -> \"TRUE\"\n  \"Logical\" -> \"FALSE\"\n  \"Logical\" -> \"NA\"\n  \"Atomic vectors\" -> \"Character\"\n  \"Numeric\" -> \"Integer\"\n  \"Numeric\" -> \"Double\"\n  \"Numeric\" -> \"Inf\"\n  \"Numeric\" -> \"-Inf\"\n  \"Numeric\" -> \"NaN\"\n  \"Recursive vectors\" -> List\n  \"List\" -> \"Data frame\"\n  \"Data frame\" -> Tibble \n  \"Double\" -> \"Date [S3]\"\n  \"Double\" -> \"Date-Time [S3]\"\n  \"Integer\" -> \"Factor [S3]\"\n}\n","config":{"engine":"circo","options":null}},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figure 7.2: All important R objects in one graph
</p>
</div>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="intror.html#cb117-1"></a><span class="co">## for graph&#39;n with DiagrammeR: http://rich-iannone.github.io/DiagrammeR/index.html</span></span></code></pre></div>
<p>Striking is that a <code>data frame</code> in R is special list. Where R-lists can contain different types of vectors of different lengths, data frames can contain different types of vectors with <strong>the same</strong> length; A data frame is alway rectangular. <code>Tibble</code> is just a special data frame with nice printing options. Matrices and arrays are build on top of atomic vectors. We will later see how this works. Dates, Date-Time and Factors are S3 vectors; a special class of R-objects and named ‘S3’ for historical reasons.</p>
<p>We learn about ‘recursive vectors’ in the next chapter.</p>
<div id="data-types" class="section level3 unnumbered" number="">
<h3>Data Types</h3>
<p>The most simple objects in R are single values. They can be of different class and type. Single objects are commonly vectors of length 1, consisting of one class and holding one type of data.</p>
<p>Values can be of class:</p>
<ol style="list-style-type: decimal">
<li>Numeric (can be of type “double” or of type “integer”)</li>
<li>Integer (is of type “integer”)</li>
<li>Logical (is of type “logical”)</li>
<li>Date and Date-Time (are of class “POSIXct” “POSIXt”)</li>
<li>Factor (are of class “factor”)</li>
<li>Special values are: <code>NaN</code> (not a number, but of type “numeric”), <code>NA</code> (R’s indication for a missing value, of type ‘logical’), <code>Inf</code> or <code>-Inf</code> (infinite and it’s negative counterpart, of type ‘numeric’), <code>NULL</code> (an empty vector/value, is an ‘atomic’)</li>
</ol>
<p>There are a number of functions that can be used to inspect an object to learn what the class and type is. Below you will see these functions in action.</p>
<p><strong>You have to know about object types in R, to be able to use functions that are usually meant to have a specific type of object as input and give a specific type of object type as output.</strong></p>
</div>
<div id="double-vector" class="section level3 unnumbered" number="">
<h3>Double vector</h3>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="intror.html#cb118-1"></a>double_x &lt;-<span class="st"> </span><span class="fl">5.4</span> <span class="co"># using the `&lt;-` assign function to create an numeric object</span></span>
<span id="cb118-2"><a href="intror.html#cb118-2"></a><span class="kw">class</span>(double_x) <span class="co"># the class = &quot;nummeric&quot;</span></span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="intror.html#cb120-1"></a><span class="kw">typeof</span>(double_x) <span class="co"># the vector type</span></span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="intror.html#cb122-1"></a><span class="kw">is.numeric</span>(double_x)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="integer-vector" class="section level3 unnumbered" number="">
<h3>Integer vector</h3>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="intror.html#cb124-1"></a>integer_x &lt;-<span class="st"> </span>5L <span class="co">## integer vector</span></span>
<span id="cb124-2"><a href="intror.html#cb124-2"></a><span class="kw">class</span>(integer_x)</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="intror.html#cb126-1"></a><span class="kw">typeof</span>(integer_x)</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="intror.html#cb128-1"></a><span class="kw">is.numeric</span>(integer_x)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="intror.html#cb130-1"></a><span class="kw">is.double</span>(integer_x)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="intror.html#cb132-1"></a><span class="co"># integer and double are both called &#39;numeric&#39;</span></span></code></pre></div>
</div>
<div id="logical-vector" class="section level3 unnumbered" number="">
<h3>Logical vector</h3>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="intror.html#cb133-1"></a>logical_x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">NA</span>) <span class="co">## logical vector</span></span>
<span id="cb133-2"><a href="intror.html#cb133-2"></a><span class="kw">class</span>(logical_x)</span></code></pre></div>
<pre><code>## [1] &quot;logical&quot;</code></pre>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="intror.html#cb135-1"></a><span class="kw">typeof</span>(logical_x)</span></code></pre></div>
<pre><code>## [1] &quot;logical&quot;</code></pre>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="intror.html#cb137-1"></a><span class="kw">is.logical</span>(logical_x)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="date-and-date-time" class="section level3 unnumbered" number="">
<h3>Date and Date-Time</h3>
<p>Parsing Dates and Date-Times can be very tricky because there is no real standard in date/date-time notation around the world. <strong>So if you generate data with dates and/or date-times in it, please record the format in the metadata to the data.</strong></p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="intror.html#cb139-1"></a><span class="co">## assume &#39;Dutch&#39; format (dd-mm-yyyy)</span></span>
<span id="cb139-2"><a href="intror.html#cb139-2"></a>date_x &lt;-<span class="st"> </span>lubridate<span class="op">::</span><span class="kw">as_datetime</span>(</span>
<span id="cb139-3"><a href="intror.html#cb139-3"></a>  <span class="st">&quot;02/05/1990&quot;</span>,   </span>
<span id="cb139-4"><a href="intror.html#cb139-4"></a>  <span class="dt">tz =</span> <span class="st">&quot;Europe/Amsterdam&quot;</span>, <span class="co"># time-zone </span></span>
<span id="cb139-5"><a href="intror.html#cb139-5"></a>  <span class="dt">format =</span> <span class="st">&quot;%d/%m/%y&quot;</span>) <span class="co"># format in which the date is provided</span></span>
<span id="cb139-6"><a href="intror.html#cb139-6"></a></span>
<span id="cb139-7"><a href="intror.html#cb139-7"></a>date_x</span></code></pre></div>
<pre><code>## [1] &quot;2019-05-02 CEST&quot;</code></pre>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="intror.html#cb141-1"></a><span class="kw">class</span>(date_x)</span></code></pre></div>
<pre><code>## [1] &quot;POSIXct&quot; &quot;POSIXt&quot;</code></pre>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="intror.html#cb143-1"></a><span class="kw">typeof</span>(date_x)</span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="intror.html#cb145-1"></a><span class="kw">is.recursive</span>(date_x)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="intror.html#cb147-1"></a>date_time_x &lt;-<span class="st"> </span>lubridate<span class="op">::</span><span class="kw">dmy_hms</span>(<span class="st">&quot;02/05/1990 22:13:50&quot;</span>,  </span>
<span id="cb147-2"><a href="intror.html#cb147-2"></a>                                  <span class="co">## date-time class</span></span>
<span id="cb147-3"><a href="intror.html#cb147-3"></a>                                  <span class="dt">tz =</span> <span class="st">&quot;Europe/Amsterdam&quot;</span>)</span>
<span id="cb147-4"><a href="intror.html#cb147-4"></a><span class="kw">class</span>(date_time_x)</span></code></pre></div>
<pre><code>## [1] &quot;POSIXct&quot; &quot;POSIXt&quot;</code></pre>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="intror.html#cb149-1"></a><span class="kw">typeof</span>(date_time_x)</span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="intror.html#cb151-1"></a><span class="kw">is.recursive</span>(date_time_x)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
</div>
<div id="character-vector" class="section level3 unnumbered" number="">
<h3>Character vector</h3>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="intror.html#cb153-1"></a>string_x &lt;-<span class="st"> &quot;Hello there, are you still with me?&quot;</span> <span class="co">## character vector</span></span>
<span id="cb153-2"><a href="intror.html#cb153-2"></a><span class="kw">class</span>(string_x)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="intror.html#cb155-1"></a><span class="kw">typeof</span>(string_x)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="intror.html#cb157-1"></a><span class="kw">is.numeric</span>(string_x)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="intror.html#cb159-1"></a><span class="co">## combining strings</span></span>
<span id="cb159-2"><a href="intror.html#cb159-2"></a>string_combined &lt;-<span class="st"> </span><span class="kw">c</span>(</span>
<span id="cb159-3"><a href="intror.html#cb159-3"></a>string_x, <span class="st">&quot;Or do you feel like the sky will come crashing down on you?&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb159-4"><a href="intror.html#cb159-4"></a><span class="st">  </span><span class="kw">print</span>()</span></code></pre></div>
<pre><code>## [1] &quot;Hello there, are you still with me?&quot;                        
## [2] &quot;Or do you feel like the sky will come crashing down on you?&quot;</code></pre>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="intror.html#cb161-1"></a><span class="kw">print</span>(<span class="st">&quot;Anyway, I think it is time for a coffee break!!&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Anyway, I think it is time for a coffee break!!&quot;</code></pre>
</div>
<div id="special-values" class="section level3 unnumbered" number="">
<h3>Special values</h3>
<p>To do calculations or mathematical approximations we need a number of special characters. Here are the real-world (funny in this context) mathematical equivalents:</p>
<ul>
<li><code>NULL</code> -&gt; There is no ‘real world’ equivalent (maybe ‘empty’ comes closest)</li>
<li><code>Inf</code> -&gt; Infinity or <span class="math inline">\(\infty\)</span></li>
<li><code>-Inf</code> -&gt; negative infinity or <span class="math inline">\(-\infty\)</span></li>
<li><code>NA</code>-&gt; missing value, often indicated as 999 or -999 in SPSS</li>
</ul>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="intror.html#cb163-1"></a>na_x &lt;-<span class="st"> </span><span class="ot">NA</span> <span class="co">## missing value</span></span>
<span id="cb163-2"><a href="intror.html#cb163-2"></a><span class="kw">class</span>(na_x)</span></code></pre></div>
<pre><code>## [1] &quot;logical&quot;</code></pre>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="intror.html#cb165-1"></a><span class="kw">typeof</span>(na_x)</span></code></pre></div>
<pre><code>## [1] &quot;logical&quot;</code></pre>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="intror.html#cb167-1"></a>null &lt;-<span class="st"> </span><span class="ot">NULL</span> <span class="co">## empty value</span></span>
<span id="cb167-2"><a href="intror.html#cb167-2"></a><span class="kw">class</span>(null)</span></code></pre></div>
<pre><code>## [1] &quot;NULL&quot;</code></pre>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="intror.html#cb169-1"></a>infinite &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">/</span><span class="dv">0</span> <span class="co">## infinite number</span></span>
<span id="cb169-2"><a href="intror.html#cb169-2"></a><span class="kw">class</span>(infinite)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="intror.html#cb171-1"></a>minus_infinite &lt;-<span class="st"> </span><span class="dv">-1</span><span class="op">/</span><span class="dv">0</span> <span class="co">## minus infinite</span></span>
<span id="cb171-2"><a href="intror.html#cb171-2"></a>not_a_number &lt;-<span class="st"> </span><span class="dv">0</span><span class="op">/</span><span class="dv">0</span> <span class="co">## not a number</span></span></code></pre></div>
</div>
<div id="factors" class="section level3 unnumbered" number="">
<h3>Factors</h3>
<p>Factors are special R objects to store information on groups or vectors that contain predefined values (order or unordered categorical variables). Below we look at an example from the <code>forcats</code> package. If a variable is categorical you should use a factor in R. Build on top of <code>factors</code> are <code>ordered factors</code> that are categorical variables with values that have a certain order.</p>
<p>Let’s assume we have a <code>month_of_the_year</code> variable in our data.</p>
<p><strong>CAN YOU SPOT THE TYPO?</strong></p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="intror.html#cb172-1"></a>months_var &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Dec&quot;</span>, <span class="st">&quot;Apr&quot;</span>, <span class="st">&quot;Jam&quot;</span>, <span class="st">&quot;Mar&quot;</span>)</span></code></pre></div>
<p>Using a character vector to record this variable has two problems:
There are twelve possible months. Nothing is preventing you from making a typing error. Sorting the character variable as it is is not useful.</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="intror.html#cb173-1"></a>months_var</span></code></pre></div>
<pre><code>## [1] &quot;Dec&quot; &quot;Apr&quot; &quot;Jam&quot; &quot;Mar&quot;</code></pre>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="intror.html#cb175-1"></a><span class="kw">sort</span>(months_var)</span></code></pre></div>
<pre><code>## [1] &quot;Apr&quot; &quot;Dec&quot; &quot;Jam&quot; &quot;Mar&quot;</code></pre>
<p>You can solve these problems with a factor. To create a factor, start by creating a list of the valid levels:</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="intror.html#cb177-1"></a>month_levels &lt;-<span class="st"> </span><span class="kw">c</span>(</span>
<span id="cb177-2"><a href="intror.html#cb177-2"></a>  <span class="st">&quot;Jan&quot;</span>, <span class="st">&quot;Feb&quot;</span>, <span class="st">&quot;Mar&quot;</span>, <span class="st">&quot;Apr&quot;</span>, <span class="st">&quot;May&quot;</span>, <span class="st">&quot;Jun&quot;</span>, </span>
<span id="cb177-3"><a href="intror.html#cb177-3"></a>  <span class="st">&quot;Jul&quot;</span>, <span class="st">&quot;Aug&quot;</span>, <span class="st">&quot;Sep&quot;</span>, <span class="st">&quot;Oct&quot;</span>, <span class="st">&quot;Nov&quot;</span>, <span class="st">&quot;Dec&quot;</span></span>
<span id="cb177-4"><a href="intror.html#cb177-4"></a>)</span></code></pre></div>
<p>Now you can create a factor:</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="intror.html#cb178-1"></a>months_var_valid &lt;-<span class="st"> </span><span class="kw">factor</span>(months_var, <span class="dt">levels =</span> month_levels)</span>
<span id="cb178-2"><a href="intror.html#cb178-2"></a>months_var_valid</span></code></pre></div>
<pre><code>## [1] Dec  Apr  &lt;NA&gt; Mar 
## Levels: Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</code></pre>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="intror.html#cb180-1"></a><span class="kw">sort</span>(months_var_valid)</span></code></pre></div>
<pre><code>## [1] Mar Apr Dec
## Levels: Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</code></pre>
<p><strong>Be aware: Any values not in the set will be silently converted to <code>NA</code></strong></p>
<p>Factors prevent you from entering two differently spelled values for the same thing in categorical variable.</p>
<p>Consider this example</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="intror.html#cb182-1"></a><span class="kw">tribble</span>(</span>
<span id="cb182-2"><a href="intror.html#cb182-2"></a>  <span class="op">~</span><span class="st"> &quot;name&quot;</span>, <span class="op">~</span><span class="st">&quot;age&quot;</span>, <span class="op">~</span><span class="st">&quot;sex&quot;</span>, <span class="op">~</span><span class="st">&quot;bmi&quot;</span>,</span>
<span id="cb182-3"><a href="intror.html#cb182-3"></a>    <span class="st">&quot;Jan&quot;</span>,   <span class="dv">23</span>,     <span class="st">&quot;Male&quot;</span>, <span class="dv">34</span>,</span>
<span id="cb182-4"><a href="intror.html#cb182-4"></a>    <span class="st">&quot;John&quot;</span>,  <span class="dv">34</span>,     <span class="st">&quot;M&quot;</span>,    <span class="dv">21</span>,</span>
<span id="cb182-5"><a href="intror.html#cb182-5"></a>    <span class="st">&quot;Sue&quot;</span>,   <span class="dv">56</span>,     <span class="st">&quot;F&quot;</span>,    <span class="dv">28</span>,</span>
<span id="cb182-6"><a href="intror.html#cb182-6"></a>    <span class="st">&quot;Kyra&quot;</span>,  <span class="dv">34</span>,     <span class="st">&quot;F&quot;</span>,    <span class="dv">21</span></span>
<span id="cb182-7"><a href="intror.html#cb182-7"></a>  </span>
<span id="cb182-8"><a href="intror.html#cb182-8"></a>) -&gt;<span class="st"> </span>bmi</span>
<span id="cb182-9"><a href="intror.html#cb182-9"></a></span>
<span id="cb182-10"><a href="intror.html#cb182-10"></a>bmi<span class="op">$</span>sex &lt;-<span class="st"> </span><span class="kw">factor</span>(bmi<span class="op">$</span>sex, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;F&quot;</span>, <span class="st">&quot;M&quot;</span>))</span>
<span id="cb182-11"><a href="intror.html#cb182-11"></a></span>
<span id="cb182-12"><a href="intror.html#cb182-12"></a>bmi</span></code></pre></div>
<pre><code>## # A tibble: 4 x 4
##   name    age sex     bmi
##   &lt;chr&gt; &lt;dbl&gt; &lt;fct&gt; &lt;dbl&gt;
## 1 Jan      23 &lt;NA&gt;     34
## 2 John     34 M        21
## 3 Sue      56 F        28
## 4 Kyra     34 F        21</code></pre>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="intror.html#cb184-1"></a><span class="co">## or visually</span></span>
<span id="cb184-2"><a href="intror.html#cb184-2"></a>bmi <span class="op">%&gt;%</span></span>
<span id="cb184-3"><a href="intror.html#cb184-3"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> sex, <span class="dt">y =</span> bmi)) <span class="op">+</span></span>
<span id="cb184-4"><a href="intror.html#cb184-4"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">colour =</span> sex))</span></code></pre></div>
<p><img src="ch06_1-intror_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="intror.html#cb185-1"></a><span class="co">## better:</span></span>
<span id="cb185-2"><a href="intror.html#cb185-2"></a><span class="co">## inspect levels of intended factor first</span></span>
<span id="cb185-3"><a href="intror.html#cb185-3"></a><span class="kw">tribble</span>(</span>
<span id="cb185-4"><a href="intror.html#cb185-4"></a>  <span class="op">~</span><span class="st"> &quot;name&quot;</span>, <span class="op">~</span><span class="st">&quot;age&quot;</span>, <span class="op">~</span><span class="st">&quot;sex&quot;</span>, <span class="op">~</span><span class="st">&quot;bmi&quot;</span>,</span>
<span id="cb185-5"><a href="intror.html#cb185-5"></a>    <span class="st">&quot;Jan&quot;</span>,   <span class="dv">23</span>,     <span class="st">&quot;Male&quot;</span>, <span class="dv">31</span>,</span>
<span id="cb185-6"><a href="intror.html#cb185-6"></a>    <span class="st">&quot;John&quot;</span>,  <span class="dv">34</span>,     <span class="st">&quot;M&quot;</span>,    <span class="dv">28</span>,</span>
<span id="cb185-7"><a href="intror.html#cb185-7"></a>    <span class="st">&quot;Sue&quot;</span>,   <span class="dv">56</span>,     <span class="st">&quot;F&quot;</span>,    <span class="dv">25</span>,</span>
<span id="cb185-8"><a href="intror.html#cb185-8"></a>    <span class="st">&quot;Kyra&quot;</span>,  <span class="dv">34</span>,     <span class="st">&quot;F&quot;</span>,    <span class="dv">21</span></span>
<span id="cb185-9"><a href="intror.html#cb185-9"></a>  </span>
<span id="cb185-10"><a href="intror.html#cb185-10"></a>) -&gt;<span class="st"> </span>bmi_better</span>
<span id="cb185-11"><a href="intror.html#cb185-11"></a></span>
<span id="cb185-12"><a href="intror.html#cb185-12"></a><span class="kw">unique</span>(bmi_better<span class="op">$</span>sex)</span></code></pre></div>
<pre><code>## [1] &quot;Male&quot; &quot;M&quot;    &quot;F&quot;</code></pre>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="intror.html#cb187-1"></a><span class="co">## or visually</span></span>
<span id="cb187-2"><a href="intror.html#cb187-2"></a>bmi_better <span class="op">%&gt;%</span></span>
<span id="cb187-3"><a href="intror.html#cb187-3"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> sex, <span class="dt">y =</span> bmi)) <span class="op">+</span></span>
<span id="cb187-4"><a href="intror.html#cb187-4"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">colour =</span> sex))</span></code></pre></div>
<p><img src="ch06_1-intror_files/figure-html/unnamed-chunk-33-2.png" width="672" /></p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="intror.html#cb188-1"></a><span class="co">## fix levels of intended factor with {dplyr} and {forcats}</span></span>
<span id="cb188-2"><a href="intror.html#cb188-2"></a>bmi_better <span class="op">%&gt;%</span></span>
<span id="cb188-3"><a href="intror.html#cb188-3"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">sex_new =</span> forcats<span class="op">::</span><span class="kw">fct_collapse</span>(</span>
<span id="cb188-4"><a href="intror.html#cb188-4"></a>    sex, </span>
<span id="cb188-5"><a href="intror.html#cb188-5"></a>    <span class="dt">Male =</span> <span class="kw">c</span>(<span class="st">&quot;Male&quot;</span>, <span class="st">&quot;M&quot;</span>),</span>
<span id="cb188-6"><a href="intror.html#cb188-6"></a>    <span class="dt">Female =</span> <span class="kw">c</span>(<span class="st">&quot;F&quot;</span>))) <span class="op">%&gt;%</span></span>
<span id="cb188-7"><a href="intror.html#cb188-7"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> sex_new, <span class="dt">y =</span> bmi)) <span class="op">+</span></span>
<span id="cb188-8"><a href="intror.html#cb188-8"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">colour =</span> sex_new))</span></code></pre></div>
<p><img src="ch06_1-intror_files/figure-html/unnamed-chunk-33-3.png" width="672" /></p>
</div>
</div>
<div id="manipulating-vectors" class="section level2" number="7.11">
<h2><span class="header-section-number">7.11</span> Manipulating vectors</h2>
<div id="coercion" class="section level3 unnumbered" number="">
<h3>Coercion</h3>
<p>If we combine values, a vector of length &gt;1 is the result. At the same time there are rules for which type the final product vector will be when combining different types of vector (or values). This is called <code>coercion</code> when it happens <em>implicitely</em> like when you use <code>c()</code>. We call is <code>casting</code> when it happens explicitely when you use a constructor-function like <code>as.numeric(x)</code></p>
<p>see: <a href="https://cran.r-project.org/web/packages/vctrs/vignettes/s3-vector.html" class="uri">https://cran.r-project.org/web/packages/vctrs/vignettes/s3-vector.html</a> and the <code>{vctrs}</code> package for more details. This is considered and advanced topic and will not be dealt with in details in this course.</p>
<p>We will see coercion happen as we examine different types of vectors and combining them below.</p>
<p>Combining values (or vectors) or <code>c</code>reating them from scratch can be achieved by using the <code>c()</code> function.</p>
</div>
<div id="combining-data-types" class="section level3 unnumbered" number="">
<h3>Combining data types</h3>
<p>What happens if we combine different types of data in one vector?</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="intror.html#cb189-1"></a>vector &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>,  <span class="dv">3</span>, <span class="st">&quot;Python is great!&quot;</span>, <span class="st">&quot;R is greater!&quot;</span>)</span>
<span id="cb189-2"><a href="intror.html#cb189-2"></a>vector</span></code></pre></div>
<pre><code>##  [1] &quot;1&quot;                &quot;2&quot;                &quot;3&quot;                &quot;4&quot;               
##  [5] &quot;5&quot;                &quot;6&quot;                &quot;7&quot;                &quot;8&quot;               
##  [9] &quot;9&quot;                &quot;10&quot;               NA                 NA                
## [13] NA                 &quot;3&quot;                &quot;Python is great!&quot; &quot;R is greater!&quot;</code></pre>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="intror.html#cb191-1"></a><span class="kw">is.character</span>(vector)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="counting-missing-values-na" class="section level3 unnumbered" number="">
<h3>Counting missing values (<code>NA</code>)</h3>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="intror.html#cb193-1"></a>vector_with_true_NAs &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">NA</span>, <span class="ot">FALSE</span>, <span class="ot">NA</span>, <span class="ot">FALSE</span>)</span>
<span id="cb193-2"><a href="intror.html#cb193-2"></a></span>
<span id="cb193-3"><a href="intror.html#cb193-3"></a><span class="co">## how many NA</span></span>
<span id="cb193-4"><a href="intror.html#cb193-4"></a><span class="kw">is.na</span>(vector_with_true_NAs) </span></code></pre></div>
<pre><code>## [1] FALSE  TRUE FALSE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="intror.html#cb195-1"></a><span class="kw">sum</span>(<span class="kw">is.na</span>(vector_with_true_NAs))</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
</div>
<div id="mathematical-operations" class="section level3 unnumbered" number="">
<h3>Mathematical operations</h3>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="intror.html#cb197-1"></a><span class="co">## Error sum on character</span></span>
<span id="cb197-2"><a href="intror.html#cb197-2"></a><span class="kw">sum</span>(vector) </span></code></pre></div>
<pre><code>## Error in sum(vector): invalid &#39;type&#39; (character) of argument</code></pre>
<p>You can add/subtract/devide or use other arithmetic functions on numeric vectors</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="intror.html#cb199-1"></a>a &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">9</span>)</span>
<span id="cb199-2"><a href="intror.html#cb199-2"></a>b &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">8</span>)</span>
<span id="cb199-3"><a href="intror.html#cb199-3"></a></span>
<span id="cb199-4"><a href="intror.html#cb199-4"></a>z1 &lt;-<span class="st"> </span>a <span class="op">-</span><span class="st"> </span>b</span></code></pre></div>
<pre><code>## Warning in a - b: longer object length is not a multiple of shorter object
## length</code></pre>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="intror.html#cb201-1"></a>z1</span></code></pre></div>
<pre><code>## [1] -1 -1 -1 -1  7</code></pre>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="intror.html#cb203-1"></a>z2 &lt;-<span class="st"> </span>b <span class="op">-</span><span class="st"> </span>a</span></code></pre></div>
<pre><code>## Warning in b - a: longer object length is not a multiple of shorter object
## length</code></pre>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="intror.html#cb205-1"></a>z2</span></code></pre></div>
<pre><code>## [1]  1  1  1  1 -7</code></pre>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="intror.html#cb207-1"></a>z3 &lt;-<span class="st"> </span>a <span class="op">/</span><span class="st"> </span>b</span></code></pre></div>
<pre><code>## Warning in a/b: longer object length is not a multiple of shorter object length</code></pre>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="intror.html#cb209-1"></a>z3</span></code></pre></div>
<pre><code>## [1] 0.5000000 0.7500000 0.8333333 0.8750000 4.5000000</code></pre>
<p><strong>DISCUSS</strong> Mind the <code>Warning message: In a - b : longer object length is not a multiple of shorter object length</code>. Discuss with your neighbour what this means. Try experimenting with increasing or decreasing the number of elements in the vectors above. What does this warning say about how mathmatical operations work in R?</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="intror.html#cb211-1"></a>z4 &lt;-<span class="st"> </span><span class="kw">sum</span>(a)</span>
<span id="cb211-2"><a href="intror.html#cb211-2"></a>z4</span></code></pre></div>
<pre><code>## [1] 25</code></pre>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="intror.html#cb213-1"></a>z5 &lt;-<span class="st"> </span><span class="kw">max</span>(a) <span class="op">-</span><span class="st"> </span><span class="kw">max</span>(b)</span>
<span id="cb213-2"><a href="intror.html#cb213-2"></a>z5</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
</div>
<div id="make-sequences" class="section level3 unnumbered" number="">
<h3>Make sequences</h3>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="intror.html#cb215-1"></a>jedi &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="st">&quot;Luke&quot;</span>, <span class="dt">times =</span> <span class="dv">10</span>)</span>
<span id="cb215-2"><a href="intror.html#cb215-2"></a>midichlorians &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="st">&quot;Force&quot;</span>, <span class="dt">length.out =</span> <span class="dv">20</span>)</span>
<span id="cb215-3"><a href="intror.html#cb215-3"></a>I_am_your_Father &lt;-<span class="st"> </span><span class="kw">c</span>(</span>
<span id="cb215-4"><a href="intror.html#cb215-4"></a>  <span class="kw">paste</span>(jedi, </span>
<span id="cb215-5"><a href="intror.html#cb215-5"></a>        <span class="kw">paste</span>(<span class="st">&quot;Use the&quot;</span>, midichlorians), <span class="dt">sep =</span> <span class="st">&quot;, &quot;</span>)</span>
<span id="cb215-6"><a href="intror.html#cb215-6"></a>  ) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb215-7"><a href="intror.html#cb215-7"></a><span class="st">  </span><span class="kw">rep</span>(<span class="dt">each =</span> <span class="dv">3</span>)</span>
<span id="cb215-8"><a href="intror.html#cb215-8"></a></span>
<span id="cb215-9"><a href="intror.html#cb215-9"></a>I_am_your_Father</span></code></pre></div>
<pre><code>##  [1] &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot;
##  [4] &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot;
##  [7] &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot;
## [10] &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot;
## [13] &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot;
## [16] &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot;
## [19] &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot;
## [22] &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot;
## [25] &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot;
## [28] &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot;
## [31] &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot;
## [34] &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot;
## [37] &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot;
## [40] &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot;
## [43] &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot;
## [46] &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot;
## [49] &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot;
## [52] &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot;
## [55] &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot;
## [58] &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot; &quot;Luke, Use the Force&quot;</code></pre>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="intror.html#cb217-1"></a><span class="co">## simple</span></span>
<span id="cb217-2"><a href="intror.html#cb217-2"></a><span class="kw">rep</span>(<span class="dv">10</span>, <span class="dt">times =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 10 10</code></pre>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="intror.html#cb219-1"></a><span class="kw">rep</span>(<span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">20</span>), <span class="dt">each =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 10 10 20 20</code></pre>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="intror.html#cb221-1"></a><span class="kw">rep</span>(<span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">20</span>), <span class="dt">times =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 10 20 10 20</code></pre>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="intror.html#cb223-1"></a><span class="kw">rep</span>(<span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">20</span>), <span class="dt">times =</span> <span class="dv">2</span>, <span class="dt">each =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 10 10 20 20 10 10 20 20</code></pre>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="intror.html#cb225-1"></a><span class="kw">rep</span>(<span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">20</span>), <span class="dt">each =</span> <span class="dv">2</span>, <span class="dt">times =</span> <span class="dv">2</span>) <span class="co">## same as previous</span></span></code></pre></div>
<pre><code>## [1] 10 10 20 20 10 10 20 20</code></pre>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="intror.html#cb227-1"></a><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">1</span>, <span class="dt">to =</span> <span class="dv">4</span>, <span class="dt">length.out =</span> <span class="dv">4</span>)</span></code></pre></div>
<pre><code>## [1] 1 2 3 4</code></pre>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="intror.html#cb229-1"></a><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">1</span>, <span class="dt">to =</span> <span class="dv">4</span>, <span class="dt">length.out =</span> <span class="dv">8</span>)</span></code></pre></div>
<pre><code>## [1] 1.000000 1.428571 1.857143 2.285714 2.714286 3.142857 3.571429 4.000000</code></pre>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="intror.html#cb231-1"></a><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">0</span>, <span class="dt">to =</span> <span class="dv">4</span>, <span class="dt">length.out =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1] 0.0000000 0.4444444 0.8888889 1.3333333 1.7777778 2.2222222 2.6666667
##  [8] 3.1111111 3.5555556 4.0000000</code></pre>
</div>
</div>
<div id="indices" class="section level2" number="7.12">
<h2><span class="header-section-number">7.12</span> Indices</h2>
<p>An index for a vector indicats the position of the vectors element. Indices are much-used tools in each programming language. In R we use two different syntaxes for indices</p>
<ol style="list-style-type: decimal">
<li><code>[]</code> For indexing vector elements (this chapter)</li>
<li><code>[[]]</code> for indexing list-elements or dataframes (Chapter <a href="#lab1crecursivevectors"><strong>??</strong></a>)</li>
<li><code>[&lt;rows&gt;, &lt;columns&gt;]</code> for indexing dataframes (Chapter <a href="#lab1crecursivevectors"><strong>??</strong></a>)</li>
</ol>
<p>Below, I show how to use the <code>[]</code> index on atomic vectors</p>
<p>We create a vector containing 100 random normals</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="intror.html#cb233-1"></a><span class="kw">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb233-2"><a href="intror.html#cb233-2"></a>hundred &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">100</span>)</span>
<span id="cb233-3"><a href="intror.html#cb233-3"></a><span class="co">## I use the head function to get the first few values</span></span>
<span id="cb233-4"><a href="intror.html#cb233-4"></a><span class="kw">head</span>(hundred)</span></code></pre></div>
<pre><code>## [1] -0.56047565 -0.23017749  1.55870831  0.07050839  0.12928774  1.71506499</code></pre>
<p>To get the third and then the first ten elements of the <code>hundred</code> vector</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="intror.html#cb235-1"></a>hundred[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] -0.5604756</code></pre>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="intror.html#cb237-1"></a>hundred[<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)]</span></code></pre></div>
<pre><code>##  [1] -0.56047565 -0.23017749  1.55870831  0.07050839  0.12928774  1.71506499
##  [7]  0.46091621 -1.26506123 -0.68685285 -0.44566197</code></pre>
<p>So you see from this example: we can use a vector to index a vector. Let’s elaborate on that.</p>
<p>To see what we created we can plot a density polynom (a sort of histogram displaying a line in stead of bars) using the <code>ggplot2()</code> package. We will use this plotting package extensively in this course. For now just try to follow what the result of the following code is, we will get into more details on plotting in Chapter <a href="#lab2viz"><strong>??</strong></a>. In order to work with <code>{ggplot2}</code> we need to transform the <code>hundred</code> vector into a dataframe. This is what the <code>enframe()</code> function does. The <code>%&gt;%</code> (or the so-called pipe) symbol we saw before in Chapter <a href="edacase.html#edacase">4</a> will be explained in detail in Chapter <a href="#lab2viz"><strong>??</strong></a></p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="intror.html#cb239-1"></a>hundred <span class="op">%&gt;%</span></span>
<span id="cb239-2"><a href="intror.html#cb239-2"></a><span class="st">  </span><span class="kw">enframe</span>() <span class="op">%&gt;%</span></span>
<span id="cb239-3"><a href="intror.html#cb239-3"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> value)) <span class="op">+</span></span>
<span id="cb239-4"><a href="intror.html#cb239-4"></a><span class="st">  </span><span class="kw">geom_density</span>()</span></code></pre></div>
<p><img src="ch06_1-intror_files/figure-html/unnamed-chunk-41-1.png" width="672" /></p>
<p>Imagine we want to pull out all numbers from the <code>hundred</code> vector that are larger than 0. To do this we can use the index. First we create a vector that has two types of values a <code>TRUE</code> at the position of the value in <code>hundred</code> that is larger than 0 and a <code>FALSE</code> at the positon of the value in <code>hundred</code> that is smaller than 0. Can you estimate how many values in <code>hundred</code> that are smaller than 0?</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="intror.html#cb240-1"></a>logical_smaller_than_zero &lt;-<span class="st"> </span>hundred <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span></span>
<span id="cb240-2"><a href="intror.html#cb240-2"></a>logical_smaller_than_zero[<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)]</span></code></pre></div>
<pre><code>##  [1] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE</code></pre>
<p>You see here that from the first ten values in <code>hundred</code> the 3rd, 4th, 5th, 6th and 7th value are larger than 0. The consecutiveness of this observation is pure coincidence.</p>
<p>Now we can use our logical index to get all values larger than 0 from the <code>hundred</code> vector</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="intror.html#cb242-1"></a>larger_than_zero_values &lt;-<span class="st"> </span>hundred[logical_smaller_than_zero]</span>
<span id="cb242-2"><a href="intror.html#cb242-2"></a><span class="co">## again we ask for the first ten elements of our new &gt;0 vector</span></span>
<span id="cb242-3"><a href="intror.html#cb242-3"></a>larger_than_zero_values[<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)]</span></code></pre></div>
<pre><code>##  [1] 1.55870831 0.07050839 0.12928774 1.71506499 0.46091621 1.22408180
##  [7] 0.35981383 0.40077145 0.11068272 1.78691314</code></pre>
<p>We indeed see that these 10 values are all larger than 0. How can we check that all values in <code>larger_than_zero_values</code> are larger than zero? By creating different plots. Making plots to check if your code did what you expected is always a good idea. <em>You can not make too many plots!</em></p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="intror.html#cb244-1"></a>larger_than_zero_values <span class="op">%&gt;%</span></span>
<span id="cb244-2"><a href="intror.html#cb244-2"></a><span class="st">  </span><span class="kw">enframe</span>() <span class="op">%&gt;%</span></span>
<span id="cb244-3"><a href="intror.html#cb244-3"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> value)) <span class="op">+</span></span>
<span id="cb244-4"><a href="intror.html#cb244-4"></a><span class="st">  </span><span class="kw">geom_density</span>()</span></code></pre></div>
<p><img src="ch06_1-intror_files/figure-html/unnamed-chunk-44-1.png" width="672" /></p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="intror.html#cb245-1"></a><span class="co">## or a scatter</span></span>
<span id="cb245-2"><a href="intror.html#cb245-2"></a>larger_than_zero_values <span class="op">%&gt;%</span></span>
<span id="cb245-3"><a href="intror.html#cb245-3"></a><span class="st">  </span><span class="kw">enframe</span>() <span class="op">%&gt;%</span></span>
<span id="cb245-4"><a href="intror.html#cb245-4"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> value, <span class="dt">y =</span> name)) <span class="op">+</span></span>
<span id="cb245-5"><a href="intror.html#cb245-5"></a><span class="st">  </span><span class="kw">geom_point</span>()</span></code></pre></div>
<p><img src="ch06_1-intror_files/figure-html/unnamed-chunk-44-2.png" width="672" /></p>
<p>Indeed, no point is equal or smaller than zero.
There is one bordeline case. Can you spot it? <strong>DISCUSS with your neighbour if you can locate it</strong></p>
<p>We can make it visible by a neat filtering trick:</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="intror.html#cb246-1"></a>df &lt;-<span class="st"> </span>larger_than_zero_values <span class="op">%&gt;%</span></span>
<span id="cb246-2"><a href="intror.html#cb246-2"></a><span class="st">  </span><span class="kw">enframe</span>() </span>
<span id="cb246-3"><a href="intror.html#cb246-3"></a><span class="co">## the `name` variable is equal to the position of the &gt;0 vector  </span></span>
<span id="cb246-4"><a href="intror.html#cb246-4"></a>df <span class="op">%&gt;%</span><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> value, <span class="dt">y =</span> name)) <span class="op">+</span></span>
<span id="cb246-5"><a href="intror.html#cb246-5"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb246-6"><a href="intror.html#cb246-6"></a><span class="st">  </span><span class="co">## we add an additional geom_point for the data filtered for name == 40</span></span>
<span id="cb246-7"><a href="intror.html#cb246-7"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">data =</span> df <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">filter</span>(name <span class="op">==</span><span class="st"> </span><span class="dv">40</span>),</span>
<span id="cb246-8"><a href="intror.html#cb246-8"></a>             <span class="kw">aes</span>(<span class="dt">x =</span> value, <span class="dt">y =</span> name),</span>
<span id="cb246-9"><a href="intror.html#cb246-9"></a>             <span class="dt">fill =</span> <span class="st">&quot;red&quot;</span>, </span>
<span id="cb246-10"><a href="intror.html#cb246-10"></a>             <span class="dt">size =</span> <span class="dv">4</span>, </span>
<span id="cb246-11"><a href="intror.html#cb246-11"></a>             <span class="dt">shape =</span> <span class="dv">21</span>, </span>
<span id="cb246-12"><a href="intror.html#cb246-12"></a>             <span class="dt">alpha =</span> <span class="fl">0.6</span>)</span></code></pre></div>
<p><img src="ch06_1-intror_files/figure-html/unnamed-chunk-45-1.png" width="672" /></p>
<p>We can pull out this value from the &gt;0 vector by it’s position (40th element) <code>larger_than_zero_values</code></p>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="intror.html#cb247-1"></a><span class="co">## you see a value that is close to zero, but not equal to zero.</span></span>
<span id="cb247-2"><a href="intror.html#cb247-2"></a>larger_than_zero_values[<span class="dv">40</span>]</span></code></pre></div>
<pre><code>## [1] 0.005764186</code></pre>
<p>So you see, using the index can be valuable if you want to conditionally subset a vector or pull out specific elements by their position. You can also use the index to get opposite values (in this case lower than zero) or to remove elements from a vector. In the exercises below, I will let you practice with the index on vectors some more. This trick can also be used on data frames and lists. I will show you how to do this in Chapter <a href="recursivevectors.html#recursivevectors">8</a>. The disadvantage is that using indexes on data frames can yield R code that become difficult to read. The <code>{tidyverse}</code> provides tools to make these operations easier to perform, and code much easier to read. This will be illustrated in Chapter <a href="wrangling.html#wrangling">10</a></p>
</div>
<div id="exercises" class="section level2 unnumbered" number="">
<h2>EXERCISES</h2>
<div id="packages" class="section level3 unnumbered" number="">
<h3>Packages</h3>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="intror.html#cb249-1"></a><span class="kw">library</span>(tidyverse)</span></code></pre></div>
</div>
<div id="creating-some-vectors" class="section level3 unnumbered" number="">
<h3>1. Creating some vectors</h3>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="intror.html#cb250-1"></a><span class="kw">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb250-2"><a href="intror.html#cb250-2"></a>vec_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">10</span>)</span>
<span id="cb250-3"><a href="intror.html#cb250-3"></a>vec_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">as.integer</span>(vec_<span class="dv">1</span>)</span>
<span id="cb250-4"><a href="intror.html#cb250-4"></a>vec_<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">rep</span>(<span class="ot">TRUE</span>, <span class="dv">3</span>), <span class="kw">c</span>(<span class="kw">rep</span>(<span class="ot">FALSE</span>, <span class="dv">4</span>)), <span class="ot">NA</span>)</span>
<span id="cb250-5"><a href="intror.html#cb250-5"></a>vec_<span class="dv">4</span> &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(vec_<span class="dv">3</span>)</span>
<span id="cb250-6"><a href="intror.html#cb250-6"></a>vec_<span class="dv">5</span> &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Marc&quot;</span>, <span class="st">&quot;Ronald&quot;</span>, <span class="st">&quot;Maarten&quot;</span>)</span></code></pre></div>
<ol style="list-style-type: decimal">
<li>What does <code>set.seed(123)</code> do? Check the documentation!</li>
<li>What does the above <code>as.integer()</code> function do?</li>
<li>And <code>as.numeric()</code>?</li>
<li>Check the contents of <code>vec_2</code>, <code>vec_3</code> and <code>vec_4</code></li>
<li>Determine the <code>class()</code> of <code>vec_1</code> to <code>vec_5</code></li>
<li>What happens to the data type if we combine (using <code>c()</code> vec_1 en vec_2)? Why?</li>
<li>What is the resulting datatype is we combine vec_4 and vec_5? Why?</li>
</ol>
</div>
<div id="r-as-a-calculator" class="section level3 unnumbered" number="">
<h3>2. R as a calculator</h3>
<p>R can be used as a “regular” calculator, we will practice this a bit, just to get familiar with the way R works and displays its information</p>
<ol style="list-style-type: decimal">
<li>What is the sum of 3, 12 and 250?</li>
<li>What is the difference between 4902 and 3987?</li>
<li>Calculate 2 to the power of 24</li>
<li>What is 240 divided by 14?</li>
<li>What is the average of 12 and 20?</li>
<li>What is the average of 10.8, 13.7 and 15.9?</li>
</ol>
</div>
<div id="data-types-1" class="section level3 unnumbered" number="">
<h3>3. Data types</h3>
<p>R has a variety of different data types and structures. Knowing how to work with them is fundamental to learning and using R. The following exercises give a basic introduction to creating and manipulating them.
Using the <code>c()</code> function here that <code>creates</code> vectors is essential.</p>
<ol style="list-style-type: decimal">
<li>Create a vector (<code>vec_8</code>) consisting of the numbers 10.5, 20.4, 30.5, 28.9 and 5,4.</li>
<li>Create a vector (<code>vec_9</code>) consisting of a decreasing sequence of integers from 50 to -10.</li>
<li>Create a vector (<code>vec_10</code>) consisting of an increasing sequence of even integers from -10 to 50. You can use the <code>seq()</code> function here.</li>
<li>Add the number 5 to the tail of <code>vec_10</code> , and save the result as a new vector (<code>vec_11</code>.</li>
<li>Create a vector (<code>vec_12</code>) of five hundred alternating zeros and ones. Use the function <code>rep()</code> here.</li>
<li>Create a vector (<code>vec_13</code>) of a hundred, uniformly distributed, random values between -1 and +1. (Hint: see the function <code>runif()</code> )
Use <code>set.seed(123)</code> to set the random number generator.</li>
<li>Create a vector (<code>vec_14</code>) of hundred random normal distributed numbers with mean = 2 and standard deviation is 0.3. See <code>?rnorm()</code> for help.</li>
<li>Create a histogram (use function <code>hist()</code>) of vectors <code>vec_13</code> and <code>vec_14</code>. Can you notice something striking?<br />
</li>
<li>Calculate the average of all values in <code>vec_14</code>. (Hint: see the function <code>mean()</code>. what did you expect to be the result? Why is the answer not <em>exactly</em> equal to <code>2</code><br />
</li>
<li>Now replace position 5 in vector <code>vec_14</code> with NA, use <code>vec_14[5]</code> in you call. Confirm your operation on this vector.</li>
<li>Calculate the mean of <code>vec_14</code> again. (Hint: make sure you deal with the missing values!). Look at <code>?mean()</code> for the solution.</li>
</ol>
</div>
<div id="vector-indices" class="section level3 unnumbered" number="">
<h3>4. Vector indices</h3>
<p>In this chapter we saw how to use the <code>[]</code> on a vector.</p>
<ol style="list-style-type: decimal">
<li>Pull out all values that round down to 1.0 in vector <code>vec_1</code> <strong>HINT use <code>as.integer()</code> than create a logical index, then use the logical index to get to your answer</strong></li>
<li></li>
</ol>
</div>
<div id="the-matrix" class="section level3 unnumbered" number="">
<h3>5. The Matrix</h3>
<ol style="list-style-type: decimal">
<li>Create a matrix (<code>matrix_1</code>) of four columns and three rows with increasing integers from 1 to 12, left to right and then top to bottom. Use the function <code>matrix()</code>. See the help first.</li>
<li>Create a matrix (<code>matrix_2</code>) of four columns and three rows, the first column only containing the value <code>1</code>, the second only <code>2</code>, the third only <code>3</code> and the fourth column only <code>4</code>.</li>
<li>Calculate the sum of <code>matrix_1</code>. (Hint: see the function <code>sum()</code>)</li>
</ol>
</div>
<div id="from-vectors-to-tibbles" class="section level3 unnumbered" number="">
<h3>6. From vectors to tibbles</h3>
<p>Create the following items:</p>
<ol style="list-style-type: decimal">
<li>A numerical vector named <code>numbers</code> consisting of the following numbers: 1.8, 4.5, 10.1, 8.3.</li>
<li>A numerical vector named <code>prime</code> consisting of the following integers: 1, 3, 5, 7 and 11</li>
<li>A character vector named <code>crazy</code> consisting of the following values: ‘abc1’, ‘foo2’, ‘bar3’, ‘app5’ and ‘yepp7’</li>
<li>A logical vector named <code>valid</code>" consisting of: TRUE, FALSE, FALSE, TRUE and FALSE</li>
<li>Try to create a list called <code>mylist</code> containing the vectors <code>numbers</code>, <code>prime</code>, <code>crazy</code> and <code>valid</code>.</li>
<li>Try to create a <code>tibble</code> named <code>mydata</code> with the function <code>tibble()</code> from the above four vectors. This will fail, why? .</li>
<li>Fix the error you found by creating an extra <code>NA</code> value in one of the vectors. Create the dataframe. Also try giving the columns different names. (Hint: see the function <code>names()</code> and the function <code>tibble()</code>.</li>
<li>What happens if you try to calculate the sum of <code>mydata</code>?</li>
<li>When you look at the structure of the tibble using <code>str()</code>, you will see that the <code>crazy</code> column with the “abc1”, “foo2”, etc values has a certain data type. Which data type is “name”? Do you think it is the right type? Or do you need to change it? To what other type could you change it?</li>
</ol>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="rmarkdown.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="recursivevectors.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/uashogeschoolutrecht/staRters/edit/master/ch06_1-intror.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["exploratory_data_analysis.pdf", "exploratory_data_analysis.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
